<div class="border rounded-lg p-4 bg-white shadow-md max-w-2xl mx-auto my-10">
  <h2 class="text-xl font-semibold mb-4">üí¨ Live Chat</h2>
  <div id="chat-box" class="h-64 overflow-y-scroll bg-gray-100 p-3 mb-2 rounded"></div>
  <input id="chat-input" type="text" placeholder="Type a message..." class="w-full border px-4 py-2 rounded mb-2" />
  <button onclick="sendMessage()" class="bg-sky-600 text-white px-4 py-2 rounded">Send</button>
</div>

<!-- <script>
  const slug = "{{ blog.slug }}";
  console.log("Slug from Django:", slug);
  const chatSocket = new WebSocket("ws://" + window.location.host + "/ws/room/" + slug + "/");
</script> -->


<!-- <script>
  const chatSocket = new WebSocket("ws://" + window.location.host + "/ws/blogchat/" + slug + "/");

  chatSocket.onmessage = function(e) {
    const data = JSON.parse(e.data);
    document.querySelector("#chat-box").innerHTML += `<p><strong>${data.user}</strong>: ${data.message}</p>`;
    document.querySelector("#chat-box").scrollTop = document.querySelector("#chat-box").scrollHeight;
  }

  function sendMessage() {
    const input = document.querySelector("#chat-input");
    chatSocket.send(JSON.stringify({ message: input.value }));
    input.value = "";
  }
</script> -->
<script>
  const rawSlug = "{{ blog.slug|default:'__EMPTY__' }}";
  console.log("üîç Rendered Slug:", rawSlug);

  if (rawSlug === '__EMPTY__') {
    alert("Blog slug is missing. Check Django view/template!");
  }

  const chatSocket = new WebSocket("ws://" + window.location.host + "/ws/room/" + rawSlug + "/");
</script>
